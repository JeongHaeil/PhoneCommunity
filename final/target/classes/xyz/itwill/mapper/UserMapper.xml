<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xyz.itwill.mapper.UserMapper">
    
    <!-- Insert User -->
    <insert id="insertUser">
    INSERT INTO USERS (USER_NUM, USER_ID, USER_PASSWORD, USER_EMAIL, USER_PHONE_NUM, USER_NAME, USER_REGISTER_DATE, USER_LEVEL, USER_STATUS, USER_NICKNAME)
    VALUES (USER_SEQ.NEXTVAL, #{userId}, #{userPassword}, #{userEmail}, #{userPhoneNum}, #{userName}, SYSDATE, #{userLevel}, #{userStatus}, #{userNickName})
    </insert>

    <!-- Update User -->
    <update id="updateUser">
        UPDATE USERS
        SET 
            USER_PASSWORD = #{userPassword}, 
            USER_EMAIL = #{userEmail}, 
            USER_PHONE_NUM  = #{userPhoneNum}, 
            USER_NAME = #{userName},
            USER_UPDATE_DATE = SYSDATE,
            USER_NICKNAME = #{userNickName}
        WHERE USER_ID = #{userId}
    </update>

    <!-- Delete User by userId -->
    <delete id="deleteUser">
        DELETE FROM USERS WHERE USER_ID = #{userId}
    </delete>

    <!-- Select a User by userId -->
    <select id="selectUser" parameterType="String" resultType="xyz.itwill.dto.User">
        SELECT * FROM USERS WHERE USER_ID = #{userId}
    </select>

    <!-- Select all Users -->
    <select id="selectUserList" resultType="xyz.itwill.dto.User">
        SELECT * FROM USERS
    </select>

    <!-- Select a User by Nickname -->
    <select id="selectUserByNickname" parameterType="String" resultType="xyz.itwill.dto.User">
        SELECT * FROM USERS WHERE USER_NICKNAME = #{userNickName}
    </select>
    
    <!-- Select a User by userId with explicit column mappings -->
    <select id="selectUserByUserId" parameterType="string" resultType="xyz.itwill.dto.User">
        SELECT user_num AS userNum,
               user_id AS userId,
               user_password AS userPassword,
               user_email AS userEmail,
               user_phone_num AS userPhoneNum,
               user_name AS userName,
               user_update_date AS userUpdateDate,
               user_last_login AS userLastLogin,
               user_register_date AS userRegisterDate,
               user_level AS userLevel,
               user_status AS userStatus,
               user_nickname AS userNickName
        FROM users
        WHERE user_id = #{userId}
    </select>

</mapper>
