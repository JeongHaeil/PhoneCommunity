<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xyz.itwill.mapper.UserMapper">

    <!-- Insert User -->
    <insert id="insertUser">
        INSERT INTO USERS (USER_NUM, USER_ID, USER_PASSWORD, USER_EMAIL, USER_PHONE_NUM, USER_NAME, USER_REGISTER_DATE, USER_LEVEL, USER_STATUS, USER_NICKNAME)
        VALUES (USER_SEQ.NEXTVAL, #{userId}, #{userPassword}, #{userEmail}, #{userPhoneNum}, #{userName}, SYSDATE, #{userLevel}, #{userStatus}, #{userNickName})
    </insert>

    <!-- Update User -->
    <update id="updateUser">
        UPDATE USERS
        SET 
            USER_PASSWORD = #{userPassword}, 
            USER_EMAIL = #{userEmail}, 
            USER_PHONE_NUM = #{userPhoneNum}, 
            USER_NAME = #{userName},
            USER_UPDATE_DATE = SYSDATE,
            USER_NICKNAME = #{userNickName}
        WHERE USER_ID = #{userId}
    </update>

    <!-- Delete User by userId -->
    <delete id="deleteUser">
        DELETE FROM USERS WHERE USER_ID = #{userId}
    </delete>

    <!-- Select a User by userId -->
    <select id="selectUser" parameterType="String" resultType="xyz.itwill.dto.User">
        SELECT * FROM USERS WHERE USER_ID = #{userId}
    </select>

    <!-- Select all Users -->
    <select id="selectUserList" resultType="xyz.itwill.dto.User">
        SELECT * FROM USERS
    </select>

   <!-- 닉네임으로 사용자 조회 -->
<select id="selectUserByNickname" parameterType="string" resultType="xyz.itwill.dto.User">
    SELECT USER_NUM AS userNum,
           USER_ID AS userId,
           USER_PASSWORD AS userPassword,
           USER_EMAIL AS userEmail,
           USER_PHONE_NUM AS userPhoneNum,
           USER_NAME AS userName,
           USER_UPDATE_DATE AS userUpdateDate,
           USER_LAST_LOGIN AS userLastLogin,
           USER_REGISTER_DATE AS userRegisterDate,
           USER_LEVEL AS userLevel,
           USER_STATUS AS userStatus,
           USER_NICKNAME AS userNickName
    FROM USERS
    WHERE USER_NICKNAME = #{userNickName}
</select>

<!-- 이메일로 사용자 조회 -->
<select id="selectUserByEmail" parameterType="string" resultType="xyz.itwill.dto.User">
    SELECT USER_NUM AS userNum,
           USER_ID AS userId,
           USER_PASSWORD AS userPassword,
           USER_EMAIL AS userEmail,
           USER_PHONE_NUM AS userPhoneNum,
           USER_NAME AS userName,
           USER_UPDATE_DATE AS userUpdateDate,
           USER_LAST_LOGIN AS userLastLogin,
           USER_REGISTER_DATE AS userRegisterDate,
           USER_LEVEL AS userLevel,
           USER_STATUS AS userStatus,
           USER_NICKNAME AS userNickName
    FROM USERS
    WHERE USER_EMAIL = #{userEmail}
</select>
    <!-- Select a User by userId with explicit column mappings -->
    <select id="selectUserByUserId" parameterType="string" resultType="xyz.itwill.dto.User">
        SELECT USER_NUM AS userNum,
               USER_ID AS userId,
               USER_PASSWORD AS userPassword,
               USER_EMAIL AS userEmail,
               USER_PHONE_NUM AS userPhoneNum,
               USER_NAME AS userName,
               USER_UPDATE_DATE AS userUpdateDate,
               USER_LAST_LOGIN AS userLastLogin,
               USER_REGISTER_DATE AS userRegisterDate,
               USER_LEVEL AS userLevel,
               USER_STATUS AS userStatus,
               USER_NICKNAME AS userNickName
        FROM USERS
        WHERE USER_ID = #{userId}
    </select>
    
   
    
</mapper>
