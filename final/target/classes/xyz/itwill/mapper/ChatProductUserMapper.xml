<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="xyz.itwill.mapper.ChatProductUserMapper">
  
  <select id="getProductAndSellerInfo" parameterType="int" resultMap="productUserResultMap">
    SELECT PRODUCT_IDX, PRODUCT_USER_ID, PRODUCT_SUBJECT, PRODUCT_PRICE, PRODUCT_CATEGORY,
           SELLER_ID, user_id, user_nickname
    FROM products 
    join users on PRODUCT_USER_ID = user_num
    WHERE p.PRODUCT_IDX = #{productIdx}
</select>


<resultMap id="productUserResultMap" type="xyz.itwill.dto.ChatProductUser">
    <result property="productId" column="PRODUCT_IDX"/>
    <result property="productUserId" column="PRODUCT_USER_ID"/>
    <result property="productSubject" column="PRODUCT_SUBJECT"/>
    <result property="productPrice" column="PRODUCT_PRICE"/>
    <result property="productCategory" column="PRODUCT_CATEGORY"/>
    <result property="sellerId" column="SELLER_ID"/>  <!-- 숫자형 SELLER_ID -->
    <result property="userId" column="user_id"/>
    <result property="userNickname" column="user_nickname"/>
</resultMap>
</mapper>